<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cadeados ‚Äî Senhas com sinais</title>
  <style>
    :root{--bg:#071822;--card:#0f2b31;--accent:#21d07a;--muted:#9fbfb2}
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;font-family:Inter,system-ui,Roboto,Helvetica,Arial;color:#e8f6ef;background:linear-gradient(180deg,#051118,#083036);display:flex;flex-direction:column;align-items:center}
    header{width:100%;padding:16px 20px;display:flex;justify-content:space-between;align-items:center}
    h1{margin:0;font-size:18px}
    main{flex:1;display:flex;align-items:center;justify-content:center;width:100%;padding:20px}
    .card{width:min(820px,96%);background:var(--card);border-radius:12px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.6)}
    .lock{display:flex;flex-direction:column;align-items:center;gap:10px;padding:18px;background:rgba(255,255,255,0.02);border-radius:10px}
    .icon{font-size:40px}
    .label{color:var(--muted)}
    .row{display:flex;gap:8px}
    input{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;font-size:16px}
    button{padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:#062219;cursor:pointer;font-weight:600}
    .dock{position:fixed;left:10px;right:10px;bottom:14px;display:flex;gap:8px;justify-content:center}
    .slot{min-width:76px;height:86px;background:rgba(255,255,255,0.03);border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--muted)}
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6)}
    .modal .box{background:#071e1a;padding:20px;border-radius:12px;text-align:center}
    .hint{color:var(--muted);font-size:13px;text-align:center;margin-top:12px}
  </style>
</head>
<body>
  <header>
    <h1>Cadeados ‚Äî Senhas com sinais</h1>
    <div style="display:flex;gap:8px">
      <button id="resetBtn" style="background:#ff6b6b;color:white">Reiniciar</button>
    </div>
  </header>

  <main>
    <div class="card">
      <div id="lockArea">
        <!-- cadeados -->
      </div>
      <div class="hint">Compara√ß√µes ignoram mai√∫sculas/min√∫sculas e espa√ßos. Os sinais (como + e =) devem estar presentes.</div>
    </div>
  </main>

  <div class="dock" id="dock"></div>

  <div class="modal" id="modal">
    <div class="box">
      <h2>Voc√™ concluiu!</h2>
      <p>Todos os cadeados foram abertos.</p>
      <div style="margin-top:10px;display:flex;gap:8px;justify-content:center"><button id="close">Fechar</button><button id="mreset">Reiniciar</button></div>
    </div>
  </div>

  <script>
    // senhas fornecidas
    const rawPasswords = ["V+F=A+2","Y=x+1","768","100","111"];

    // Fun√ß√£o de normaliza√ß√£o: remove espa√ßos e deixa em min√∫sculas (preserva sinais)
    function normalize(s){
      return String(s).replace(/\s+/g,'').toLowerCase();
    }

    const passwords = rawPasswords.map(p => normalize(p));

    let current = 0;
    const lockArea = document.getElementById('lockArea');
    const dock = document.getElementById('dock');
    const modal = document.getElementById('modal');

    function createLock(i){
      const cont = document.createElement('div');
      cont.className='lock';
      cont.id = `lock-${i}`;
      cont.style.margin = '12px 0';

      const icon = document.createElement('div'); icon.className='icon'; icon.textContent = 'üîí';
      const label = document.createElement('div'); label.className='label'; label.textContent = `Cadeado ${i+1}`;

      const row = document.createElement('div'); row.className='row';
      const input = document.createElement('input'); input.type='text'; input.placeholder='Digite a senha'; input.setAttribute('aria-label', `senha-${i+1}`);
      const btn = document.createElement('button'); btn.textContent = 'Abrir';

      btn.addEventListener('click', ()=> attempt(i, input.value, cont, icon, label));
      input.addEventListener('keyup', (e)=>{ if(e.key === 'Enter') btn.click(); });

      row.appendChild(input); row.appendChild(btn);
      cont.appendChild(icon); cont.appendChild(label); cont.appendChild(row);

      // esconder todos menos o atual
      if(i !== 0) cont.style.display = 'none';

      return cont;
    }

    function attempt(i, value, element, iconEl, labelEl){
      if(i !== current) return;
      const norm = normalize(value);
      // requer que os sinais estejam presentes: verificar que cada s√≠mbolo presente em rawPasswords[i] (exceto letras/d√≠gitos) aparece na entrada normalizada
      const requiredSymbols = rawPasswords[i].replace(/[A-Za-z0-9\s]/g,''); // mant√©m s√≠mbolos como +,=
      // checa s√≠mbolos
      let symbolsOk = true;
      for(const ch of requiredSymbols){ if(!norm.includes(ch)) symbolsOk = false; }

      if(!symbolsOk){
        // anima√ß√£o de erro
        element.animate([{transform:'translateX(0)'},{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}],{duration:280});
        element.querySelector('input').value='';
        return;
      }

      if(norm === passwords[i]){
        // sucesso
        iconEl.textContent = 'üîì';
        labelEl.textContent = `Aberto ${i+1}`;
        element.style.display = 'none';
        addDock(i);
        current++;
        if(current < rawPasswords.length){
          const next = document.getElementById(`lock-${current}`);
          if(next) next.style.display = '';
        } else {
          setTimeout(()=> showModal(), 350);
        }
      } else {
        element.animate([{transform:'translateY(0)'},{transform:'translateY(-6px)'},{transform:'translateY(0)'}],{duration:240});
        element.querySelector('input').value='';
      }
    }

    function addDock(i){
      const slot = document.createElement('div'); slot.className='slot';
      slot.innerHTML = `<div style="font-size:20px">üîì</div><div style="margin-top:6px;font-weight:600">C${i+1}</div>`;
      // substituir primeiro placeholder vazio se existir
      const placeholders = dock.querySelectorAll('.slot');
      const empty = Array.from(placeholders).find(s=> s.textContent.trim()==='');
      if(empty) dock.replaceChild(slot, empty);
      else dock.appendChild(slot);
    }

    function build(){
      // montar cadeados
      for(let i=0;i<rawPasswords.length;i++){
        const l = createLock(i);
        lockArea.appendChild(l);
      }

      // criar placeholders na dock
      for(let i=0;i<rawPasswords.length;i++){
        const p = document.createElement('div'); p.className='slot'; p.textContent=''; dock.appendChild(p);
      }

      document.getElementById('resetBtn').addEventListener('click', resetAll);
      document.getElementById('close').addEventListener('click', ()=> modal.style.display='none');
      document.getElementById('mreset').addEventListener('click', ()=>{ modal.style.display='none'; resetAll(); });
    }

    function resetAll(){
      current = 0;
      lockArea.innerHTML = '';
      dock.innerHTML = '';
      build();
    }

    function showModal(){ modal.style.display='flex'; }

    build();
  </script>
</body>
</html>
